<div>
  <h2>
    <span id="metrics-page-heading" data-cy="metricsPageHeading" jhiTranslate="metrics.title">Application Metrics</span>

    <button class="btn btn-primary float-end" (click)="refresh()">
      <fa-icon icon="sync"></fa-icon> <span jhiTranslate="metrics.refresh.button">Refresh</span>
    </button>
  </h2>

  <h3 jhiTranslate="metrics.jvm.title">JVM Metrics</h3>

  <ng-container *ngIf="metrics() as metricsRef">
    <div class="row" *ngIf="!updatingMetrics()">
      <jhi-jvm-memory class="col-md-4" [updating]="updatingMetrics()" [jvmMemoryMetrics]="metricsRef.jvm" />
      <jhi-jvm-threads class="col-md-4" [threads]="threads()" />
      <jhi-metrics-system class="col-md-4" [updating]="updatingMetrics()" [systemMetrics]="metricsRef.processMetrics" />
    </div>
  </ng-container>

  <jhi-metrics-garbagecollector
    *ngIf="metrics()?.garbageCollector as metricsRefGarbageCollector"
    [updating]="updatingMetrics()"
    [garbageCollectorMetrics]="metricsRefGarbageCollector"
  />

  <div *ngIf="updatingMetrics()" class="well well-lg" jhiTranslate="metrics.updating">Updating...</div>

  <jhi-metrics-request
    *ngIf="metrics()?.['http.server.requests'] as metricsRefHttpServerRequests"
    [updating]="updatingMetrics()"
    [requestMetrics]="metricsRefHttpServerRequests"
  />

  <jhi-metrics-endpoints-requests
    *ngIf="metrics()?.services as metricsRefServices"
    [updating]="updatingMetrics()"
    [endpointsRequestsMetrics]="metricsRefServices"
  />

  <jhi-metrics-cache *ngIf="metrics()?.cache as metricsRefCache" [updating]="updatingMetrics()" [cacheMetrics]="metricsRefCache" />

  <jhi-metrics-datasource
    *ngIf="metrics() && metricsKeyExistsAndObjectNotEmpty('databases')"
    [updating]="updatingMetrics()"
    [datasourceMetrics]="metrics()!.databases"
  />
</div>
