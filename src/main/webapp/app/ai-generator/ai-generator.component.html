<div>
  <h2>AI Application Assistant</h2>

  <!-- Selection Sections -->
  <h3>1. I'll check CV, Projects, Skills and About Me</h3>
  <!-- Add sections with checkboxes for CVs, Projects, and Skills using *ngFor -->

  <h3>2. Paste the Job Description</h3>
  <textarea [(ngModel)]="jobPost" rows="10" style="width: 100%"></textarea>

  <h3>3. Select AI Model</h3>
  <select [(ngModel)]="selectedModel" class="form-select mb-3" [disabled]="availableModels.length === 0">
    <option *ngIf="availableModels.length === 0" value="">Loading models...</option>
    <option *ngFor="let model of availableModels" [value]="model">
      {{ model }}
    </option>
  </select>

  <button
    (click)="generateAnalysis()"
    [disabled]="isLoading || !jobPost || !selectedModel"
    class="btn btn-primary">
    <span *ngIf="isLoading" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
    {{ isLoading ? ' Analyzing...' : 'Analyze and Generate Letters' }}
  </button>

  <!-- Results Section -->
  <div *ngIf="analysisResult">
    <hr />
    <h3>Analysis Results</h3>

    <h4>Fit Score: {{ analysisResult.fitAnalysis.scorePercentage }}%</h4>
    <p><strong>Reasoning:</strong> {{ analysisResult.fitAnalysis.reasoning }}</p>

    <div>
      <strong>Matching Skills:</strong>
      <ul>
        <li *ngFor="let skill of analysisResult.fitAnalysis.matchingSkills">{{ skill }}</li>
      </ul>
    </div>
    <div>
      <strong>Potential Gaps:</strong>
      <ul>
        <li *ngFor="let skill of analysisResult.fitAnalysis?.missingSkills">{{ skill }}</li>
      </ul>
    </div>

    <h3>Generated Cover Letter</h3>
    <pre>{{ analysisResult.coverLetter }}</pre>
    <h3>Generated Application Letter</h3>
    <pre>{{ analysisResult.applicationLetter }}</pre>
    <h3>Generated Motivation Letter</h3>
    <pre>{{ analysisResult.motivationLetter }}</pre>
  </div>
</div>
