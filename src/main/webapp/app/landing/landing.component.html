<!-- =================== Hero Section =================== -->
<section #section id="home" class="landing-hero">
  <div class="container">
    <div class="hero-content mt-5" data-aos="fade-up">
      <h1 jhiTranslate="landing.heroTitle"></h1>
      <h1 class="lead" jhiTranslate="landing.heroSubtitle"></h1>
      <a href="#contact" class="btn btn-primary btn-lg" jhiTranslate="landing.ctaContact"></a>
    </div>
  </div>
</section>

<!-- =================== About Section =================== -->
<section #section id="about" class="about-section py-5" *ngIf="!isLoadingAbout && aboutCard">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-7">
        <p class="sub-heading" jhiTranslate="landing.aboutSubheading"></p>
        <h2 class="fw-bold mb-3" jhiTranslate="landing.aboutHeading"></h2>
        <div class="about-preview card-text-truncate" [innerHTML]="aboutCard.contentHtml"></div>
        <div class="mt-2">
          <a href="#" class="read-more-link ms-4" (click)="openAboutModal(); $event.preventDefault()">
            {{ 'global.readMore' | translate }}
          </a>
          <a [href]="cvDownloadLink" target="_blank" download class="underscore-link ms-4">
            <i class="fas fa-download me-1"></i>
            <span>
              {{ 'landing.downloadCV' | translate }}
            </span>
          </a>
          <a *ngIf="isAdminEnv" routerLink="/ai-generator" class="underscore-link ms-4">
            <i class="fas fa-magic me-1"></i>
            <span>
              {{ 'landing.createLetters' | translate }}
            </span>
          </a>
        </div>
      </div>
      <!-- Your Picture (Right Column) -->
      <div class="col-lg-5">
        <div class="profile-picture-container">
          <ng-container *ngIf="aboutCard.firstMediaUrl">
            <img
              *ngIf="aboutCard.firstMediaType === 'IMAGE'"
              [src]="getFullMediaPath(aboutCard.firstMediaUrl)"
              alt="Profile Picture"
              class="profile-picture img-fluid rounded shadow-lg" />
            <video
              *ngIf="aboutCard.firstMediaType === 'VIDEO'"
              [src]="getFullMediaPath(aboutCard.firstMediaUrl)"
              class="profile-picture img-fluid rounded shadow-lg"
              loop
              muted
              controls
              playsinline>
            </video>
          </ng-container>
          <ng-container *ngIf="!aboutCard.firstMediaUrl">
            <img
              src="content/media/profile-picture.jpg"
              alt="Zoran Stepanoski"
              class="profile-picture img-fluid rounded shadow-lg" />
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- =================== Services Section =================== -->
<section #section id="services" class="services-section bg-light py-5">
  <div class="container">
    <!-- Main Headings -->
    <div class="mb-5">
      <p class="sub-heading" jhiTranslate="landing.servicesSubheading"></p>
      <h2 class="fw-bold" jhiTranslate="landing.servicesHeading"></h2>
    </div>

    <!-- Conditional rendering for loaded services -->
    <div *ngIf="!isLoadingServices && businessServices.length > 0" class="row g-4">
      <div *ngFor="let service of businessServices; let i = index" class="col-12 col-md-6 col-lg-4 mb-4 d-flex">
        <div class="card h-100 d-flex flex-column" data-aos="fade-up" [attr.data-aos-delay]="i * 100">
          <!-- Media -->
          <div class="card-img-top-container">
            <img
              *ngIf="getMediaType(service.firstMediaUrl) === 'IMAGE'"
              [src]="getFullMediaPath(service.firstMediaUrl, '/content/media/default-service.jpg')"
              [alt]="service.title"
              class="img-fluid rounded"
            />
            <video
              *ngIf="getMediaType(service.firstMediaUrl) === 'VIDEO'"
              [src]="getFullMediaPath(service.firstMediaUrl)"
              class="img-fluid rounded"
              muted
              loop
              controls
              playsinline>
            </video>
          </div>

          <!-- Card Body -->
          <div class="card-body d-flex flex-column">
            <h3 class="card-title">{{ service.title }}</h3>
            <p class="card-text flex-grow-1 card-text-truncate" [innerHTML]="service.description"></p>

            <!-- Read more link -->
            <a href="#" class="read-more-link ms-4" (click)="openBusinessServiceModal(service.id); $event.preventDefault()">
              {{ 'global.readMore' | translate }}
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading Spinner -->
    <div *ngIf="isLoadingServices" class="text-center">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
  </div>
</section>

<!-- =================== Projects Section =================== -->
<section #section id="projects" class="services-section bg-light py-5">
  <div class="container">
    <!-- Main Headings -->
    <div class="mb-5">
      <p class="sub-heading" jhiTranslate="landing.projectsSubheading"></p>
      <h2 class="fw-bold" jhiTranslate="landing.projectsHeading"></h2>
    </div>

    <div *ngIf="!isLoadingProjects && projects.length > 0" class="row g-4">
      <div *ngFor="let project of projects; let i = index" class="col-12 col-md-6 col-lg-4 mb-4 d-flex">
        <div class="card h-100 d-flex flex-column" data-aos="fade-up" [attr.data-aos-delay]="i * 100">
          <!-- Media -->
          <div class="card-img-top-container">
            <img
              *ngIf="getMediaType(project.firstMediaUrl) === 'IMAGE'"
              [src]="getFullMediaPath(project.firstMediaUrl)"
              [alt]="project.title"
              class="img-fluid rounded"/>
            <video
              *ngIf="getMediaType(project.firstMediaUrl) === 'VIDEO'"
              [src]="getFullMediaPath(project.firstMediaUrl)"
              class="img-fluid rounded project-media-clickable"
              muted
              loop
              controls
              playsinline>
            </video>
          </div>

          <!-- Card Body -->
          <div class="card-body d-flex flex-column">
            <h3 class="card-title">{{ project?.title }}</h3>
            <p class="card-text flex-grow-1 card-text-truncate" [innerHTML]="project.description"></p>

            <a href="#" class="read-more-link ms-4" (click)="openProjectMediaModal(project.id); $event.preventDefault()">
              {{ 'global.readMore' | translate }}
            </a>
          </div>
        </div>
      </div>
    </div>
    <!-- Loading Spinner -->
    <div *ngIf="isLoadingProjects" class="text-center">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
  </div>
</section>

<!-- =================== CV Section =================== -->
<section #section id="cv" class="services-section bg-light py-5">
  <div class="container">
    <!-- Main Headings -->
    <div class="mb-5">
      <p class="sub-heading" jhiTranslate="landing.cvSubheading"></p>
      <h2 class="fw-bold" jhiTranslate="landing.cvHeading"></h2>
    </div>

    <div *ngIf="!isLoadingCv && cvEntries.length > 0" class="row g-4">
      <div *ngFor="let cv of cvEntries; let i = index" class="col-12 col-md-6 col-lg-4 mb-4 d-flex">
        <div class="card h-100 d-flex flex-column" data-aos="fade-up" [attr.data-aos-delay]="i * 100">
          <!-- Media -->
          <div class="card-img-top-container">
            <img
              *ngIf="getMediaType(cv.firstMediaUrl) === 'IMAGE'"
              [src]="getFullMediaPath(cv.firstMediaUrl, '/content/media/default-work.jpg')"
              [alt]="cv.companyName"
              class="img-fluid rounded"/>
            <video
              *ngIf="getMediaType(cv.firstMediaUrl) === 'VIDEO'"
              [src]="getFullMediaPath(cv.firstMediaUrl)"
              class="img-fluid rounded project-media-clickable"
              muted
              loop
              controls
              playsinline>
            </video>
          </div>

          <!-- Card Body -->
          <div class="card-body d-flex flex-column">
            <h3 class="card-title">{{ cv.companyName }}</h3>
            <p class="card-subtitle mb-2 text-muted">
              {{ cv.startDate | date: 'MMM yyyy' }} - {{ cv.endDate ? (cv.endDate | date: 'MMM yyyy') : ('global.present' | translate) }}
            </p>
            <p class="card-text flex-grow-1 card-text-truncate" [innerHTML]="cv.jobDescriptionHTML"></p>
            <a href="#" class="read-more-link ms-4" (click)="openCvDetailModal(cv.id); $event.preventDefault()">
              {{ 'global.readMore' | translate }}
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading Spinner -->
    <div *ngIf="isLoadingCv" class="text-center">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
  </div>
</section>

<!-- =================== Skills Section =================== -->
<section #section id="skills" class="skills-section py-5">
  <div class="container">
    <div class="mb-5 text-center">
      <p class="sub-heading" jhiTranslate="landing.skillsSubheading"></p>
      <h2 class="fw-bold" jhiTranslate="landing.skillsHeading"></h2>
    </div>

    <div *ngIf="!isLoadingSkills && skills.length > 0" class="row">
      <div *ngFor="let skill of skills; let i = index" class="col-md-6 mb-4" data-aos="fade-up" [attr.data-aos-delay]="i * 50">
        <div class="skill-item">
          <div class="d-flex justify-content-between">
            <span class="skill-name">{{ skill.name }}</span>
            <span class="skill-percentage">{{ skill.percentage }}%</span>
          </div>
          <div class="progress" style="height: 10px">
            <div
              class="progress-bar"
              role="progressbar"
              [style.width]="skill.percentage + '%'"
              [attr.aria-valuenow]="skill.percentage"
              aria-valuemin="0"
              aria-valuemax="100"
            ></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading Spinner -->
    <div *ngIf="isLoadingSkills" class="text-center">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
    <div *ngIf="!isLoadingSkills && totalItems > skillsPerPage" class="d-flex justify-content-center align-items-center mt-4">
      <button class="btn btn-outline-primary" (click)="previousPage()" [disabled]="currentPage === 0">
        &laquo; {{ 'global.previous' | translate }}
      </button>

      <span class="mx-3">
        {{ 'global.page' | translate }} {{ currentPage + 1 }} / {{ totalPages }}
      </span>

      <button class="btn btn-outline-primary" (click)="nextPage()" [disabled]="currentPage >= totalPages - 1">
        {{ 'global.next' | translate }} &raquo;
      </button>
    </div>
  </div>
</section>

<!-- =================== Contact Section =================== -->
<section #section id="contact" class="contact-section-wrapper" data-aos="fade-up">
  <jhi-contact-form></jhi-contact-form>
</section>
